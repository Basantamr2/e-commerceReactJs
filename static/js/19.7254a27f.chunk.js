"use strict";(self.webpackChunkecommerce1=self.webpackChunkecommerce1||[]).push([[19],{7922:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var s=a(4165),n=a(5861),r=a(9439),c=a(2791),i=a(3926),l=a(7620),o=a(8163),d=a.p+"static/media/preview.5fb1161d4ca5695646ac.png",u=a(4855),m=a(6747),h=a(5705),p=a(4270),x=a(184);function v(){var e,t,a,v,f=(0,c.useContext)(i.A),b=f.getCart,j=f.deleteCart,g=f.updateCart,C=f.setCartNums,N=f.checkout,y=f.cartId,w=f.setCartId,Z=c.useState(!1),k=(0,r.Z)(Z,2),S=k[0],I=k[1];var _=(0,h.TA)({initialValues:{details:"",phone:"",city:""},onSubmit:function(t){return(e=e||(0,n.Z)((0,s.Z)().mark((function e(t){var a,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(y,t);case 2:"success"===(null===(n=e.sent)||void 0===n?void 0:n.data.status)&&(window.location.href=null===n||void 0===n||null===(a=n.data.session)||void 0===a?void 0:a.url);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),O=(0,c.useContext)(l.h).isLogin,P=(0,c.useState)(null),A=(0,r.Z)(P,2),E=A[0],q=A[1],F=(0,c.useState)(!1),G=(0,r.Z)(F,2),L=G[0],R=G[1];function T(e){return(a=a||(0,n.Z)((0,s.Z)().mark((function e(t){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t);case 2:"success"===(a=e.sent).data.status&&(q(null===a||void 0===a?void 0:a.data),C(null===a||void 0===a?void 0:a.data.numOfCartItems));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){return(v=v||(0,n.Z)((0,s.Z)().mark((function e(t,a){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a){e.next=4;break}T(t),e.next=8;break;case 4:return e.next=6,g(t,a);case 6:"success"===(n=e.sent).data.status&&(q(null===n||void 0===n?void 0:n.data),C(null===n||void 0===n?void 0:n.data.numOfCartItems));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.useEffect)((function(){null!=O&&function(){(t=t||(0,n.Z)((0,s.Z)().mark((function e(){var t,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,b();case 3:"success"===(null===(a=e.sent)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.status)&&(q(null===a||void 0===a?void 0:a.data),w(a.data.data._id),C(null===a||void 0===a?void 0:a.data.numOfCartItems),R(!1)),R(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}()}),[O]),L?(0,x.jsxs)("div",{className:"container ",children:[(0,x.jsx)("h3",{className:"my-3 text-left",children:"your cart is loading ..."}),(0,x.jsx)(o.Z,{})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(p.q,{children:[(0,x.jsx)("meta",{charSet:"utf-8"}),(0,x.jsx)("title",{children:"Cart page"})]}),(0,x.jsxs)("div",{className:"container mt-5 pt-5",children:[null!==E&&void 0!==E&&E.data.totalCartPrice?(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:"cart-box p-5 bg-light  my-2 rounded",children:[(0,x.jsx)("h2",{className:"fw-bold",children:" Cart Shop"}),(0,x.jsxs)("h3",{className:"h5 fw-bold my-3  mt-4",children:["total price: ",(0,x.jsx)("span",{className:"text-success",children:null===E||void 0===E?void 0:E.data.totalCartPrice})]}),null===E||void 0===E?void 0:E.data.products.map((function(e){return(0,x.jsxs)("div",{className:"row align-items-center justify-content-between ",children:[(0,x.jsx)("div",{className:"col-md-8",children:(0,x.jsxs)("div",{className:"row my-3 align-items-center ",children:[(0,x.jsx)("div",{className:"col-md-2",children:(0,x.jsx)("img",{src:e.product.imageCover,className:"w-100",alt:"img"})}),(0,x.jsxs)("div",{className:"col-md-10",children:[(0,x.jsx)("p",{className:"fw-bolder",children:e.product.title}),(0,x.jsxs)("p",{className:"text-main",children:[e.price," EGP"]}),(0,x.jsxs)("span",{className:"cursor-pointer text-danger",onClick:function(){T(e.product._id)},children:[" ",(0,x.jsx)("i",{className:"fa-solid fa-trash text-main text-danger"})," Remove "]})]})]})}),(0,x.jsxs)("div",{className:"col-md-3 d-flex justify-content-end align-items-center",children:[(0,x.jsx)("button",{className:"btn text-main border border-1 border-success p-2",onClick:function(){V(e.product._id.toString(),e.count+1)},children:"+"}),(0,x.jsx)("span",{className:"mx-3",children:e.count}),(0,x.jsx)("button",{className:"btn text-main border border-1 border-success p-2",onClick:function(){V(e.product._id,e.count>0?e.count-1:0)},children:"-"})]}),(0,x.jsx)("hr",{})]},e.product._id)})),(0,x.jsx)("button",{className:" bg-main text-white my-3 btn",onClick:function(){return I(!0)},children:"Check out"})]})}):(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"text-start fw-bold",children:"your cart is empty"}),(0,x.jsx)("img",{src:d,alt:"img"})]}),(0,x.jsx)(u.Z,{open:S,onClose:function(){return I(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,x.jsx)(m.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:(0,x.jsxs)("form",{onSubmit:_.handleSubmit,children:[(0,x.jsx)("input",{type:"text",className:"form-control my-2",name:"details",onChange:_.handleChange,value:_.values.details,placeholder:"address "}),(0,x.jsx)("input",{type:"tel",className:"form-control my-2",name:"phone",onChange:_.handleChange,value:_.values.phone,placeholder:"phone "}),(0,x.jsx)("input",{type:"text",className:"form-control my-2",name:"city",onChange:_.handleChange,value:_.values.city,placeholder:"city "}),(0,x.jsx)("button",{className:"btn bg-main text-white",type:"submit",children:"send"})]})})})]})]})}}}]);
//# sourceMappingURL=19.7254a27f.chunk.js.map