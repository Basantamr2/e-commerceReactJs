{"version":3,"file":"static/js/19.7254a27f.chunk.js","mappings":"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","sources":["Components/Cart/Cart.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { CartContext } from '../../Context/CartContext'\r\nimport { UserToken } from '../../Context/UserToken'\r\nimport Loading from '../Loading'\r\nimport cartimg from '../../assets/images/preview.png'\r\nimport { Box, Modal } from '@mui/material'\r\nimport { useFormik } from 'formik'\r\nimport { Helmet } from 'react-helmet'\r\n\r\n\r\nexport default function Cart() {\r\n  let { getCart, deleteCart, updateCart, setCartNums, checkout, cartId, setCartId } = useContext(CartContext)\r\n  const [open, setOpen] = React.useState(false);\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  async function SubmitForm(values) {\r\n\r\n    let res = await checkout(cartId, values)\r\n    if (res?.data.status === 'success')\r\n      window.location.href = res?.data.session?.url\r\n  }\r\n  const style = {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    width: 400,\r\n    bgcolor: 'background.paper',\r\n    border: '2px solid #000',\r\n    boxShadow: 24,\r\n    p: 4,\r\n  };\r\n\r\n  let formik = useFormik({\r\n    initialValues: {\r\n      details: \"\",\r\n      phone: \"\",\r\n      city: \"\"\r\n    },\r\n    onSubmit: SubmitForm\r\n  })\r\n\r\n\r\n  let { isLogin } = useContext(UserToken)\r\n  let [data, setData] = useState(null)\r\n  let [loading, setLoading] = useState(false)\r\n\r\n\r\n  async function getCartFun() {\r\n    setLoading(true)\r\n    let res = await getCart()\r\n    if (res?.data?.status === 'success') {\r\n      setData(res?.data)\r\n      setCartId(res.data.data._id);\r\n      setCartNums(res?.data.numOfCartItems);\r\n      setLoading(false)\r\n    }\r\n    setLoading(false)\r\n  }\r\n\r\n  async function deleteCartFun(id) {\r\n    let res = await deleteCart(id)\r\n    if (res.data.status === 'success') {\r\n      setData(res?.data)\r\n      setCartNums(res?.data.numOfCartItems);\r\n    }\r\n  }\r\n  async function updateCartFun(id, count) {\r\n    if (count === 0)\r\n      deleteCartFun(id)\r\n    else {\r\n      let res = await updateCart(id, count)\r\n      if (res.data.status === 'success') {\r\n        setData(res?.data)\r\n        setCartNums(res?.data.numOfCartItems);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (isLogin == null)\r\n      return\r\n    getCartFun()\r\n  }, [isLogin])\r\n\r\n  if (loading)\r\n    return <div className='container '>\r\n      <h3 className='my-3 text-left'>your cart is loading ...</h3>\r\n      <Loading></Loading>\r\n    </div>\r\n  return (\r\n\r\n    <>\r\n    <Helmet>\r\n        <meta charSet=\"utf-8\" />\r\n        <title>Cart page</title>\r\n      </Helmet>\r\n      \r\n    <div className='container mt-5 pt-5'>\r\n\r\n      {!data?.data.totalCartPrice ? <div className='text-center'>\r\n        <p className='text-start fw-bold'>your cart is empty</p>\r\n        <img src={cartimg} alt=\"img\" />\r\n      </div> : <div>\r\n        <div className=\"cart-box p-5 bg-light  my-2 rounded\">\r\n          <h2 className='fw-bold'> Cart Shop</h2>\r\n        <h3 className='h5 fw-bold my-3  mt-4'>total price: <span className='text-success'>{data?.data.totalCartPrice}</span></h3>\r\n          {data?.data.products.map((prod) => <div key={prod.product._id} className='row align-items-center justify-content-between '>\r\n            <div className=\"col-md-8\">\r\n              <div className=\"row my-3 align-items-center \">\r\n                <div className=\"col-md-2\">\r\n                  <img src={prod.product.imageCover} className='w-100' alt=\"img\" />\r\n                </div>\r\n                <div className=\"col-md-10\">\r\n                  <p className='fw-bolder'>{prod.product.title}</p>\r\n                  <p className='text-main'>{prod.price} EGP</p>\r\n                  <span className='cursor-pointer text-danger' onClick={() => { deleteCartFun(prod.product._id) }}> <i className='fa-solid fa-trash text-main text-danger'></i> Remove </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-3 d-flex justify-content-end align-items-center\">\r\n              <button className='btn text-main border border-1 border-success p-2' onClick={() => { updateCartFun(prod.product._id.toString(), prod.count + 1) }}>+</button>\r\n              <span className='mx-3'>{prod.count}</span>\r\n              <button className='btn text-main border border-1 border-success p-2' onClick={() => { updateCartFun(prod.product._id, prod.count > 0 ? prod.count - 1 : 0) }}>-</button>\r\n            </div>\r\n            <hr />\r\n          </div>)}\r\n        <button className=' bg-main text-white my-3 btn' onClick={handleOpen}>Check out</button>\r\n        </div>\r\n\r\n\r\n      </div>}\r\n      {/* modal */}\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box sx={style}>\r\n          <form onSubmit={formik.handleSubmit}>\r\n            <input type=\"text\" className='form-control my-2' name='details' onChange={formik.handleChange} value={formik.values.details} placeholder='address ' />\r\n            <input type=\"tel\" className='form-control my-2' name='phone' onChange={formik.handleChange} value={formik.values.phone} placeholder='phone ' />\r\n            <input type=\"text\" className='form-control my-2' name='city' onChange={formik.handleChange} value={formik.values.city} placeholder='city ' />\r\n            <button className='btn bg-main text-white' type='submit'>send</button>\r\n          </form>\r\n        </Box>\r\n      </Modal>\r\n    </div>\r\n      </>\r\n  )\r\n}\r\n"],"names":["Cart","_SubmitForm","_getCartFun","_deleteCartFun","_updateCartFun","_useContext","useContext","CartContext","getCart","deleteCart","updateCart","setCartNums","checkout","cartId","setCartId","_React$useState","React","_React$useState2","_slicedToArray","open","setOpen","formik","useFormik","initialValues","details","phone","city","onSubmit","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","_res$data$session","res","wrap","_context","prev","next","sent","data","status","window","location","href","session","url","stop","apply","arguments","isLogin","UserToken","_useState","useState","_useState2","setData","_useState3","_useState4","loading","setLoading","deleteCartFun","_x2","_callee3","id","_context3","numOfCartItems","updateCartFun","_x3","_x4","_callee4","count","_context4","useEffect","_callee2","_res$data","_context2","_id","getCartFun","_jsxs","className","children","_jsx","Loading","_Fragment","Helmet","charSet","totalCartPrice","products","map","prod","src","product","imageCover","alt","title","price","onClick","toString","cartimg","Modal","onClose","Box","sx","position","top","left","transform","width","bgcolor","border","boxShadow","p","handleSubmit","type","name","onChange","handleChange","value","placeholder"],"sourceRoot":""}